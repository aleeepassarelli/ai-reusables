%% ============================================================
%%  FILE: architecture_layers.mmd
%%  TITLE: Cellular Architecture â€” Internal Layer Diagram
%%  AUTHOR: Alexandre Passarelli
%%  YEAR: 2025
%% ============================================================

flowchart TD

%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%%  CORE LAYERS
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A1["ğŸ“¡ Presentation Layer<br><small>Endpoints / Input Validation</small>"]
A2["âš™ï¸ Business Logic Layer<br><small>Rules, Use Cases, Services</small>"]
A3["ğŸ—„ï¸ Data Access Layer<br><small>Repositories / Database</small>"]
A4["ğŸ§  Memory Layer<br><small>Vector DB / Semantic Context</small>"]
A5["ğŸ“Š Monitoring & Metrics<br><small>Logs / Health / Telemetry</small>"]

%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%%  LAYER FLOW
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A1 --> A2
A2 --> A3
A2 --> A4
A2 --> A5

A3 --> A2
A4 --> A2
A5 --> A2

%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%%  SUPPORT COMPONENTS
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

subgraph External [ğŸŒ External Systems]
    EXT1["Client / API Gateway"]
    EXT2["Router / Load Balancer"]
end

EXT1 --> A1
EXT2 --> A1

subgraph Monitoring [ğŸ“ˆ Observability]
    MON1["Prometheus"]
    MON2["Grafana"]
end

A5 --> MON1
MON1 --> MON2

%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%%  DATA STORES
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

subgraph Databases [ğŸ’¾ Data Stores]
    DB1["PostgreSQL / SQL"]
    DB2["Redis / Cache"]
    DB3["Qdrant / Vector Store"]
end

A3 --> DB1
A3 --> DB2
A4 --> DB3

%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%%  NOTES
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

classDef core fill:#1e293b,stroke:#94a3b8,color:#f1f5f9,font-weight:bold
classDef support fill:#334155,stroke:#64748b,color:#e2e8f0
classDef data fill:#0f172a,stroke:#64748b,color:#e2e8f0
classDef external fill:#0f172a,stroke:#475569,color:#cbd5e1

class A1,A2,A3,A4,A5 core
class EXT1,EXT2 external
class MON1,MON2 support
class DB1,DB2,DB3 data
