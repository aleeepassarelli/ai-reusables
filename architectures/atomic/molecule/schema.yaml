# ============================================================
# ğŸ§© schema.yaml â€” Esquema da MolÃ©cula
# ============================================================
# Este arquivo define o contrato formal entre entradas e saÃ­das
# da molÃ©cula, servindo como "interface semÃ¢ntica" entre
# componentes (Ã¡tomos, outras molÃ©culas ou organismos).
# ============================================================

meta:
  id: classify_text_molecule_schema
  name: ClassificaÃ§Ã£o de Texto
  version: 1.0
  author: "Mia Mente Integrada ArquÃ©tipica"
  description: >
    Define o formato de dados e as regras de validaÃ§Ã£o para
    a molÃ©cula de classificaÃ§Ã£o de texto, composta de
    Ã¡tomos de normalizaÃ§Ã£o, vetorizaÃ§Ã£o e decisÃ£o.
  tags: [molecule, schema, text, classification]
  created_at: "2025-11-11"

# ------------------------------------------------------------
# Entradas esperadas pela molÃ©cula
# ------------------------------------------------------------

inputs:
  text:
    type: string
    required: true
    description: >
      Texto de entrada a ser analisado e classificado.
      Pode conter linguagem natural em qualquer idioma.
    examples:
      - "GPT-5 aprimora a criatividade computacional."
      - "O sistema solar possui oito planetas principais."

  candidate_labels:
    type: array
    items:
      type: string
    required: true
    description: >
      Lista de rÃ³tulos possÃ­veis para a classificaÃ§Ã£o supervisionada.
    examples:
      - ["tecnologia", "educaÃ§Ã£o", "ciÃªncia"]

# ------------------------------------------------------------
# SaÃ­das produzidas pela molÃ©cula
# ------------------------------------------------------------

outputs:
  label:
    type: string
    description: >
      RÃ³tulo predito pela molÃ©cula com base nos embeddings e anÃ¡lise semÃ¢ntica.
    examples:
      - "tecnologia"

  confidence:
    type: number
    minimum: 0.0
    maximum: 1.0
    description: >
      Grau de confianÃ§a da prediÃ§Ã£o para o rÃ³tulo selecionado.
    examples:
      - 0.92

# ------------------------------------------------------------
# ValidaÃ§Ã£o interna (opcional)
# ------------------------------------------------------------

validation:
  - rule: "len(text) > 0"
    message: "O texto de entrada nÃ£o pode estar vazio."
  - rule: "len(candidate_labels) > 1"
    message: "Ã‰ necessÃ¡rio pelo menos dois rÃ³tulos candidatos para classificaÃ§Ã£o."
  - rule: "confidence >= 0.0 and confidence <= 1.0"
    message: "O valor de confianÃ§a deve estar entre 0 e 1."

# ------------------------------------------------------------
# Mapeamento de compatibilidade (para organismos)
# ------------------------------------------------------------

compatibility:
  accepts:
    - atom: normalize_text
    - atom: vector_distance
  exports:
    - output_schema: classification_output_v1
    - embedding_format: sentence_transformer_vector
  next:
    - organism: cognitive_ui_layer
      condition: "label == 'tecnologia'"

# ------------------------------------------------------------
# VisualizaÃ§Ã£o sugerida
# ------------------------------------------------------------

blueprint:
  diagram: mermaid
  graph: |
    flowchart TD
      A[ğŸ§  Texto Original] --> B[ğŸ”¤ normalize_text]
      B --> C[ğŸ”¢ embedding_model]
      C --> D[âš–ï¸ internal.selector]
      D --> E[ğŸ·ï¸ Resultado: Label + ConfianÃ§a]
